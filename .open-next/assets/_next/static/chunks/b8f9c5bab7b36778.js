(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94872,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(48148);function i(){let e=(0,r.useTranslations)("profile"),i=(0,r.useTranslations)("common"),n=(0,a.useRouter)(),[o,l]=(0,t.useState)(null),[d,m]=(0,t.useState)(!0),[c,u]=(0,t.useState)(!1),[h,x]=(0,t.useState)(""),[g,f]=(0,t.useState)(!1),[p,b]=(0,t.useState)({name:"",phone:""});(0,t.useEffect)(()=>{y()},[]);let y=async()=>{try{let e=await fetch("/api/auth/me");if(401===e.status)return void n.push("/login");let s=await e.json();s.user&&(l(s.user),b({name:s.user.name||"",phone:s.user.phone||""}))}catch(e){x("Failed to load profile")}finally{m(!1)}},j=async e=>{e.preventDefault(),u(!0),x(""),f(!1);try{let e=await fetch("/api/auth/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),s=await e.json();if(!e.ok){x(s.error||"Update failed"),u(!1);return}s.user&&l(s.user),f(!0),setTimeout(()=>f(!1),3e3)}catch(e){x("An error occurred. Please try again.")}finally{u(!1)}},v=async()=>{await fetch("/api/auth/logout",{method:"POST"}),n.push("/"),n.refresh()};return d?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):o?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:e("title")}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,s.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:e("personalInfo")})}),(0,s.jsxs)("form",{onSubmit:j,className:"px-6 py-5 space-y-6",children:[h&&(0,s.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,s.jsx)("div",{className:"text-sm text-red-800",children:h})}),g&&(0,s.jsx)("div",{className:"rounded-md bg-green-50 p-4",children:(0,s.jsx)("div",{className:"text-sm text-green-800",children:e("updated")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("input",{type:"email",id:"email",value:o.email,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm bg-gray-50 text-gray-500 sm:text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)("input",{type:"text",id:"name",value:p.name,onChange:e=>b({...p,name:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,s.jsx)("input",{type:"tel",id:"phone",value:p.phone,onChange:e=>b({...p,phone:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{type:"submit",disabled:c,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:e(c?"updating":"updateProfile")}),(0,s.jsx)("button",{type:"button",onClick:v,className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:i("logout")})]})]})]}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsxs)("a",{href:"/orders",className:"text-indigo-600 hover:text-indigo-500 font-medium",children:[i("orders")," â†’"]})})]})}):null}e.s(["default",()=>i])}]);