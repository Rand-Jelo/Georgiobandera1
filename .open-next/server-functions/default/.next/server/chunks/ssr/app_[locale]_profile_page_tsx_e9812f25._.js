module.exports=[90719,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(15925);function f(){let a=(0,e.useTranslations)("profile"),f=(0,e.useTranslations)("common"),g=(0,d.useRouter)(),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)({name:"",phone:""});(0,c.useEffect)(()=>{t()},[]);let t=async()=>{try{let a=await fetch("/api/auth/me");if(401===a.status)return void g.push("/login");let b=await a.json();b.user&&(i(b.user),s({name:b.user.name||"",phone:b.user.phone||""}))}catch(a){o("Failed to load profile")}finally{k(!1)}},u=async a=>{a.preventDefault(),m(!0),o(""),q(!1);try{let a=await fetch("/api/auth/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),b=await a.json();if(!a.ok){o(b.error||"Update failed"),m(!1);return}b.user&&i(b.user),q(!0),setTimeout(()=>q(!1),3e3)}catch(a){o("An error occurred. Please try again.")}finally{m(!1)}},v=async()=>{await fetch("/api/auth/logout",{method:"POST"}),g.push("/"),g.refresh()};return j?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):h?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:a("title")}),(0,b.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,b.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:a("personalInfo")})}),(0,b.jsxs)("form",{onSubmit:u,className:"px-6 py-5 space-y-6",children:[n&&(0,b.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,b.jsx)("div",{className:"text-sm text-red-800",children:n})}),p&&(0,b.jsx)("div",{className:"rounded-md bg-green-50 p-4",children:(0,b.jsx)("div",{className:"text-sm text-green-800",children:a("updated")})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,b.jsx)("input",{type:"email",id:"email",value:h.email,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm bg-gray-50 text-gray-500 sm:text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,b.jsx)("input",{type:"text",id:"name",value:r.name,onChange:a=>s({...r,name:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,b.jsx)("input",{type:"tel",id:"phone",value:r.phone,onChange:a=>s({...r,phone:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("button",{type:"submit",disabled:l,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:a(l?"updating":"updateProfile")}),(0,b.jsx)("button",{type:"button",onClick:v,className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:f("logout")})]})]})]}),(0,b.jsx)("div",{className:"mt-8",children:(0,b.jsxs)("a",{href:"/orders",className:"text-indigo-600 hover:text-indigo-500 font-medium",children:[f("orders")," â†’"]})})]})}):null}a.s(["default",()=>f])}];

//# sourceMappingURL=app_%5Blocale%5D_profile_page_tsx_e9812f25._.js.map