name = "georgiobandera"
compatibility_date = "2025-12-09"
compatibility_flags = ["nodejs_compat"]

# For Cloudflare Pages deployment with OpenNext
pages_build_output_dir = ".open-next"

# Root-level database binding - uses local database for dev
# Note: account_id and DB_PROD are removed from root level as they're not supported by Pages
# For local dev: uses georgiobandera-db-local
[[d1_databases]]
binding = "DB"
database_name = "georgiobandera-db-local"
database_id = "local"  # Local database for development

[env.production]
name = "georgiobandera-prod"

[[env.production.d1_databases]]
binding = "DB"
database_name = "georgiobandera-db"
database_id = "75b60e35-e861-4d8a-9bc1-46aaf7eb9424"

[[env.production.d1_databases]]
binding = "DB_PROD"
database_name = "georgiobandera-db"
database_id = "75b60e35-e861-4d8a-9bc1-46aaf7eb9424"

[[env.production.r2_buckets]]
binding = "IMAGES"
bucket_name = "georgiobandera-images"

# Public environment variables (non-sensitive)
# Note: Sensitive keys (STRIPE_SECRET_KEY, PAYPAL_CLIENT_SECRET) must be set as Secrets in Cloudflare Dashboard
[env.production.vars]
NEXT_PUBLIC_APP_URL = "https://georgiobandera1.pages.dev"
NEXT_PUBLIC_SITE_URL = "https://georgiobandera.se"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY = "pk_test_51R6DhzGIjrwBNt3fhi0qru3dIGPwr4St89ugs6ckHX9BNimZBO30iJdhupHR624IpKe4L7ZP21acvQRaD79Kjzbg00hqoYqDLq"
NEXT_PUBLIC_PAYPAL_CLIENT_ID = "AUakk-eShgnYninYF5nHTujK5lE_7MumxZBYXO2hzZxbgt7kh4C587n34F-VxiN1A2VhRYcJW_BCydNP"

[env.preview]
name = "georgiobandera-preview"

[[env.preview.d1_databases]]
binding = "DB"
database_name = "georgiobandera-db"
database_id = "75b60e35-e861-4d8a-9bc1-46aaf7eb9424"

[[env.preview.r2_buckets]]
binding = "IMAGES"
bucket_name = "georgiobandera-images"

# Public environment variables (non-sensitive)
# Note: Sensitive keys (STRIPE_SECRET_KEY, PAYPAL_CLIENT_SECRET) must be set as Secrets in Cloudflare Dashboard
[env.preview.vars]
NEXT_PUBLIC_APP_URL = "https://georgiobandera1.pages.dev"
NEXT_PUBLIC_SITE_URL = "https://georgiobandera1.pages.dev"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY = "pk_test_51R6DhzGIjrwBNt3fhi0qru3dIGPwr4St89ugs6ckHX9BNimZBO30iJdhupHR624IpKe4L7ZP21acvQRaD79Kjzbg00hqoYqDLq"
NEXT_PUBLIC_PAYPAL_CLIENT_ID = "AUakk-eShgnYninYF5nHTujK5lE_7MumxZBYXO2hzZxbgt7kh4C587n34F-VxiN1A2VhRYcJW_BCydNP"

# Development environment - uses local database only
# Note: [env.development] is not supported by Cloudflare Pages, but kept for local development
# Usage: wrangler pages dev .open-next (uses root-level DB binding)
# This section is commented out for Pages compatibility but can be used locally
# [env.development]
# name = "georgiobandera-dev"
# 
# [[env.development.d1_databases]]
# binding = "DB"
# database_name = "georgiobandera-db-local"
# database_id = "local"
# 
# [[env.development.r2_buckets]]
# binding = "IMAGES"
# bucket_name = "georgiobandera-images"
# 
# [env.development.vars]
# NEXT_PUBLIC_APP_URL = "http://localhost:8788"
# NEXT_PUBLIC_SITE_URL = "http://localhost:8788"
# NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY = "pk_test_51R6DhzGIjrwBNt3fhi0qru3dIGPwr4St89ugs6ckHX9BNimZBO30iJdhupHR624IpKe4L7ZP21acvQRaD79Kjzbg00hqoYqDLq"
# NEXT_PUBLIC_PAYPAL_CLIENT_ID = "AUakk-eShgnYninYF5nHTujK5lE_7MumxZBYXO2hzZxbgt7kh4C587n34F-VxiN1A2VhRYcJW_BCydNP"

